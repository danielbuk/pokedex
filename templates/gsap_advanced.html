<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Pokedex GSAP - N√≠vel √âpico!</title>
    
    <!-- GSAP CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    
    <!-- CSS Avan√ßado -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_advanced.css') }}">
</head>
<body>
    <!-- Loading Screen -->
    <div class="gsap-loader" id="loader">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <div class="loader-text">Carregando Pokedex...</div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero-section" id="hero">
        <div class="particle" style="top: 20%; left: 10%;"></div>
        <div class="particle" style="top: 60%; left: 80%;"></div>
        <div class="particle" style="top: 40%; left: 30%;"></div>
        <div class="particle" style="top: 80%; left: 60%;"></div>
        <div class="particle" style="top: 30%; left: 70%;"></div>
        
        <div class="hero-content">
            <h1 class="hero-title" id="heroTitle">POKEDEX GSAP</h1>
            <p class="hero-subtitle" id="heroSubtitle">Anima√ß√µes de N√≠vel Profissional</p>
            <button class="cta-button" id="ctaButton">Explorar Pok√©mon</button>
        </div>
    </section>

    <!-- Content Section -->
    <section class="content-section" id="content">
        <div class="container">
            <!-- Stats Section -->
            <div class="stats-gsap" id="stats">
                <div class="stat-card-gsap">
                    <div class="stat-number" data-target="1302">0</div>
                    <p>Pok√©mon Dispon√≠veis</p>
                </div>
                <div class="stat-card-gsap">
                    <div class="stat-number" data-target="18">0</div>
                    <p>Tipos Diferentes</p>
                </div>
                <div class="stat-card-gsap">
                    <div class="stat-number" data-target="100">0</div>
                    <p>% Dados Oficiais</p>
                </div>
                <div class="stat-card-gsap">
                    <div class="stat-number" data-target="999">0</div>
                    <p>Anima√ß√µes √âpicas</p>
                </div>
            </div>

            <!-- Pok√©mon Grid -->
            <div class="pokemon-grid-gsap" id="pokemonGrid">
                <div class="pokemon-card-gsap">
                    <h3>üîç Testar API</h3>
                    <p>Teste a API da Pokedex com Pok√©mon populares:</p>
                    <a href="/api/pokemon/25" class="btn-gsap">Pikachu</a>
                    <a href="/api/pokemon/6" class="btn-gsap">Charizard</a>
                    <a href="/api/pokemon/150" class="btn-gsap">Mewtwo</a>
                </div>
                
                <div class="pokemon-card-gsap">
                    <h3>üìã Lista de Pok√©mon</h3>
                    <p>Veja a lista completa de Pok√©mon dispon√≠veis:</p>
                    <a href="/api/lista" class="btn-gsap">Ver Lista</a>
                    <a href="/api/lista?limit=10" class="btn-gsap">Primeiros 10</a>
                </div>
                
                <div class="pokemon-card-gsap">
                    <h3>üéØ Buscar Pok√©mon</h3>
                    <p>Busque qualquer Pok√©mon por nome ou ID:</p>
                    <form action="/buscar" method="GET" style="margin-top: 15px;">
                        <input type="text" name="q" placeholder="Digite o nome ou ID..." class="search-box">
                        <button type="submit" class="btn-gsap">Buscar</button>
                    </form>
                </div>
                
                <div class="pokemon-card-gsap">
                    <h3>üì± Links Diretos</h3>
                    <p>Acesse Pok√©mon espec√≠ficos diretamente:</p>
                    <a href="/pokemon/25" class="btn-gsap">Pikachu</a>
                    <a href="/pokemon/6" class="btn-gsap">Charizard</a>
                    <a href="/pokemon/1" class="btn-gsap">Bulbasaur</a>
                    <a href="/pokemon/150" class="btn-gsap">Mewtwo</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <div class="footer">
        <p>üéÆ Pokedex GSAP - Dados da <a href="https://pokeapi.co" target="_blank">PokeAPI</a></p>
        <p>Pok√©mon √© uma marca registrada da Nintendo</p>
    </div>

    <!-- GSAP JavaScript OTIMIZADO -->
    <script>
        // Registrar os plugins do GSAP
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

        // --- ANIMA√á√ÉO DE LOADING ---
        const loaderTimeline = gsap.timeline();
        loaderTimeline
            .to(".loader-spinner", { 
                rotation: 360, 
                duration: 1, 
                repeat: -1, 
                ease: "none" 
            })
            .to("#loader", { 
                opacity: 0, 
                duration: 0.5, 
                delay: 1.5, // Simula um tempo de carregamento
                onComplete: () => document.getElementById("loader").style.display = 'none'
            });

        // --- ANIMA√á√ÉO DA SE√á√ÉO HERO ---
        // Inicia somente ap√≥s o loader terminar
        const heroTimeline = gsap.timeline({ paused: true });
        heroTimeline
            .from("#heroTitle", { opacity: 0, y: -50, duration: 1, ease: "power2.out" })
            .from("#heroSubtitle", { opacity: 0, y: 50, duration: 1, ease: "power2.out" }, "-=0.7")
            .from("#ctaButton", { opacity: 0, scale: 0.8, duration: 0.8, ease: "back.out(1.7)" }, "-=0.5");

        // Inicia a timeline do Hero quando o loader acaba
        loaderTimeline.then(() => heroTimeline.play());

        // --- ANIMA√á√ïES DE SCROLLTRIGGER ---
        // Cards aparecem com a rolagem
        gsap.from(".pokemon-card-gsap", {
            scrollTrigger: {
                trigger: "#pokemonGrid",
                start: "top 85%",
                toggleActions: "play none none reverse"
            },
            opacity: 0,
            y: 100,
            duration: 0.8,
            stagger: 0.15,
            ease: "power2.out",
        });

        // Stats aparecem com a rolagem
        gsap.from(".stat-card-gsap", {
            scrollTrigger: {
                trigger: "#stats",
                start: "top 85%",
                toggleActions: "play none none reverse"
            },
            opacity: 0,
            scale: 0.8,
            duration: 0.6,
            stagger: 0.1,
            ease: "back.out(1.7)",
        });

        // Anima√ß√£o do contador dos stats
        gsap.utils.toArray(".stat-number").forEach(stat => {
            gsap.from(stat, {
                textContent: 0,
                duration: 2,
                ease: "power2.out",
                snap: { textContent: 1 },
                scrollTrigger: {
                    trigger: stat,
                    start: "top 90%",
                    toggleActions: "play none none reverse",
                }
            });
        });

        // --- INTERA√á√ïES DO USU√ÅRIO ---
        // Efeito de hover nos cards
        document.querySelectorAll(".pokemon-card-gsap, .stat-card-gsap").forEach(card => {
            card.addEventListener("mouseenter", () => {
                gsap.to(card, { y: -10, duration: 0.3, ease: "power2.out" });
            });
            card.addEventListener("mouseleave", () => {
                gsap.to(card, { y: 0, duration: 0.3, ease: "power2.out" });
            });
        });

        // *** BOT√ÉO "EXPLORAR POK√âMON" CORRIGIDO ***
        document.getElementById("ctaButton").addEventListener("click", () => {
            gsap.to(window, {
                duration: 1.5, // Dura√ß√£o da rolagem
                scrollTo: {
                    y: "#content", // Alvo do scroll
                    offsetY: 50 // Um pequeno espa√ßo do topo
                },
                ease: "power2.inOut" // Efeito de acelera√ß√£o
            });
        });

        console.log("üöÄ Pokedex GSAP carregada com sucesso!");
    </script>
</body>
</html>
